<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <label for="fileInput">Choose file or drag it here</label>
    <input style="display: none;" type="file" id="fileInput" hidden>
    <div id="fileName"></div>
    <script>
        // const fileLName = document.querySelector('#fileName')
        // const fileInput = document.querySelector('#fileInput')
        // fileInput.addEventListener('on')
        // fileInput.addEventListener('dragover', function(e){
        //     e.preventDefault();
        // })
        // fileInput.addEventListener('drop', function(e){

        // })




        // 'myForm' div 안에 있는 모든 input, select, checkbox 요소 가져오기
        const elements = document.querySelectorAll('#myForm input, #myForm select, #myForm input[type="checkbox"], #myForm input[type="radio"]');

        // NodeList를 배열로 변환하고 각 요소를 반복 처리
        Array.from(elements).forEach(element => {
            console.log(element.name, element.value);
            // 여기서 각 요소의 name과 value를 사용할 수 있습니다.
        });

        // send data 예시 1
        async function sendRequest() {
            const category = document.getElementById('category').value;
            const searchTerm = document.getElementById('searchTerm').value;
            
            // 쿼리 스트링 생성
            const queryString = `category=${encodeURIComponent(category)}&searchTerm=${encodeURIComponent(searchTerm)}`;

            try {
                const response = await fetch(`/search?${queryString}`);
                const data = await response.json();
                console.log(data);
            } catch (error) {
                console.error('Error:', error);
            }
        }

        // send data 예시 2
        async function submitFormData(containerId) {
    // 현재 활성화된 <div> 내의 모든 폼 컨트롤에서 데이터 수집
    const container = document.getElementById(containerId);
    const formControls = container.querySelectorAll('input, select, textarea, input[type="checkbox"], input[type="radio"]:checked');
    const formData = new URLSearchParams();
    formControls.forEach(control => {
        // 체크박스의 경우, 체크된 상태만 값을 추가
        if (control.type === 'checkbox' && control.checked) {
            formData.append(control.name, control.value);
        } else if (control.type !== 'checkbox') {
            formData.append(control.name, control.value);
        }
    });

    // 쿼리 스트링 생성
    const queryString = formData.toString();

    // 서버와 비동기 통신
    try {
        const response = await fetch('/your-endpoint?' + queryString, {
            method: 'GET', // 또는 POST, PUT 등 서버의 요구사항에 맞게 조정
            // 필요한 경우 headers, body 등 추가 설정
        });
        const data = await response.json(); // 응답 처리
        console.log(data); // 서버로부터 받은 데이터 처리
            } catch (error) {
                console.error('Error:', error);
            }
        }

        // 사용 예: 'formContainer' ID를 가진 <div> 내의 데이터를 서버로 전송
        submitFormData('formContainer');


        // Send data 예시 3

        fetch('https://example.com/data')
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.json(); // 응답을 JSON으로 변환
          })
          .then(data => {
            if (data.length === 0 || Object.keys(data).length === 0) { // 배열 또는 객체가 비어 있는 경우 확인
              console.log('No data returned from the server');
              // 여기서 데이터가 비어 있을 때의 처리 로직을 구현
            } else {
              console.log('Data received:', data);
              // 데이터 처리 로직
            }
          })
          .catch(error => console.error('Fetch error:', error));
    </script>
</body>
</html>
